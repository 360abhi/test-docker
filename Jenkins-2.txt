 Final Jenkins + Docker + Playwright Pipeline Setup Checklist
ğŸ”§ 1. Prerequisites
âœ… Docker installed and running on your host machine

âœ… Jenkins running in a Docker container

âœ… Your Jenkins container has Docker installed inside (for building Dockerfile inside pipeline)

Bonus Tip: Mount Docker socket from host into Jenkins container:

bash
Copy
Edit
-v /var/run/docker.sock:/var/run/docker.sock
ğŸ“ 2. Folder Structure in GitHub Repo
Your repo should include:

lua
Copy
Edit
.
â”œâ”€â”€ Dockerfile             <-- For Playwright environment
â”œâ”€â”€ Jenkinsfile            <-- Jenkins pipeline config
â”œâ”€â”€ test.sh                <-- Example test script (give execute permission)
â””â”€â”€ (your Playwright project files)
âš™ï¸ 3. Jenkinsfile Example
groovy
Copy
Edit
pipeline {
  agent {
    dockerfile {
      filename 'Dockerfile'
      dir '.'
    }
  }

  stages {
    stage('Run Tests') {
      steps {
        sh 'chmod +x test.sh'
        sh './test.sh'
      }
    }

    stage('Archive Result') {
      steps {
        archiveArtifacts artifacts: 'result.txt', allowEmptyArchive: true
      }
    }
  }
}
ğŸ” chmod +x is important to avoid Permission denied error.

ğŸ³ 4. Dockerfile Example (for Playwright)
dockerfile
Copy
Edit
FROM mcr.microsoft.com/playwright/python:v1.43.1

WORKDIR /app
COPY . /app

RUN pip install pytest
ğŸ§ª 5. Sample test.sh
bash
Copy
Edit
#!/bin/bash
echo "Running Playwright test..." > result.txt
pytest Playwright/jobs/test_play.py --html=Playwright/jobs/report.html >> result.txt
âœ… Make sure this file is executable:

bash
Copy
Edit
chmod +x test.sh
ğŸŒ 6. Jenkins Job Configuration
Type: Pipeline

Definition: Pipeline script from SCM

SCM: Git

Repository URL: https://github.com/<your-username>/<repo-name>

Branch: main

Credentials: Not needed for public repo

ğŸ“¦ 7. Required Jenkins Plugins
Make sure you install:

Docker Pipeline

Pipeline

Git Plugin

Pipeline: GitHub Groovy Libraries (optional)

Workspace Cleanup (optional)

You can manage plugins via:
Jenkins â†’ Manage Jenkins â†’ Plugins â†’ Available

ğŸ” 8. Restart Jenkins (if needed)
To restart Jenkins:

bash
Copy
Edit
docker restart <jenkins_container_id>
Or use Jenkins UI:
http://localhost:8080/restart

ğŸ§¹ 9. Clean Up (Optional)
Clean unused volumes:
docker volume prune

List & inspect volumes:

bash
Copy
Edit
docker volume ls  
docker volume inspect <volume_name>
ğŸš€ Youâ€™re All Set!
Your pipeline should now:

Pull the code from GitHub

Build Docker image from Dockerfile

Run Playwright test via test.sh

Archive reports or logs